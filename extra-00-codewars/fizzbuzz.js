#! /usr/bin/env node
"use strict"
import assert from "node:assert"

/*******************************************************************************
*******************************************************************************/

const fizzbuzz = [
/*******************************************************************************
*                                                                              *
*******************************************************************************/
   n => {
    const result = []
    for (let i = 1; i <= n; i++) {
      if (i % 3 === 0 && i % 5 === 0) {
        result.push('FizzBuzz')
      } else if (i % 3 === 0) {
        result.push('Fizz')
      } else if (i % 5 === 0) {
        result.push('Buzz')
      } else {
        result.push(i)
      }
    }
    return result
  },

/*******************************************************************************
*                                                                              *
*******************************************************************************/
   n => {
    const result = Array( n + 1 );

    for ( let i = 0; i < result.length; i++ )
      if ( i % 15 === 0 )
        result[i] = 'FizzBuzz';
      else if ( i % 3 === 0)
        result[i] = 'Fizz';
      else if ( i % 5 === 0)
        result[i] = 'Buzz';
      else
        result[i] = i;

    result.shift();
    return result;
  },

/*******************************************************************************
*                                                                              *
*******************************************************************************/
   n => {
    const result = Array( ++n );

    let i;

    for( i = 0; i < n; i +=  1 ) result[i] = i;
    for( i = 0; i < n; i +=  3 ) result[i] = "Fizz";
    for( i = 0; i < n; i +=  5 ) result[i] = "Buzz";
    for( i = 0; i < n; i += 15 ) result[i] = "FizzBuzz";

    result.shift();
    return result;
  },

/*******************************************************************************
*                                                                              *
*******************************************************************************/
   n => {
    const result = [ ...Array( ++n ).keys() ];

    [ [  3, "Fizz"     ],
      [  5, "Buzz"     ],
      [ 15, "FizzBuzz" ],
    ].forEach( ([ num, str ]) => {
      for( let i = num; i < n; i += num ) result[i] = str;
    });

    result.shift();
    return result;
  },

/*******************************************************************************
*                                                                              *
*******************************************************************************/
   n => {
    const result = [];

    for ( let i = 1; i <= n; i++ )
      result.push(
        i % 15 === 0 ? "FizzBuzz" :
        i %  3 === 0 ? "Fizz"     :
        i %  5 === 0 ? "Buzz"     :
        i
      );

    return result;
  },

/*******************************************************************************
*                                                                              *
*******************************************************************************/
   n => {
    const result = [];

    for ( let i = 1; i <= n; i++ )
      result.push( 
        ( !( i % 3 ) ? "Fizz" : "" ) + 
        ( !( i % 5 ) ? "Buzz" : "" ) || i
      );

    return result;
  },

/*******************************************************************************
*                                                                              *
*******************************************************************************/
   n => [ ...Array( n ).keys() ].map( i =>
     ( ++i % 3 ? "" : "Fizz" ) + ( i % 5 ? "" : "Buzz" ) || i ),

/*******************************************************************************
*                                                                              *
*******************************************************************************/
   n => Array( n ).fill( 0 ).map( ( _, i ) =>
     ( ++i % 3 ? "" : "Fizz" ) + ( i % 5 ? "" : "Buzz" ) || i ),

/*******************************************************************************
*                                                                              *
*******************************************************************************/
   n => [ ...Array( n ).keys() ].map( i =>
     ( ++i % 15 ? i % 3 ? i % 5 ? "" : "Buzz" : "Fizz" : "FizzBuzz" ) || i ),

/*******************************************************************************
*                                                                              *
*******************************************************************************/
  n => [ ...Array( n ).keys() ].reduce( ( n, i ) =>
       [ ...n, ( ++i % 3 ? "" : "Fizz" ) + ( i % 5 ? "" : "Buzz" ) || i ],
       [] ),

/*******************************************************************************
*                                                                              *
*******************************************************************************/
  n => n ? [ ...fizzbuzz[10]( n - 1 ),
         ( n % 3 ? "" : "Fizz" ) + ( n % 5 ? "" : "Buzz" ) || n
       ] : [],

/*******************************************************************************
*                                                                              *
*******************************************************************************/
   n => [ ...Array( n ).keys() ].map( i =>
     "Fizz".repeat(!( ++i % 3 )) + "Buzz".repeat(!( i % 5 )) || i ),
];

/*******************************************************************************
*  tests                                                                       *
*******************************************************************************/
const tests = [
  [ [ 100 ], [
    1     , 2     , "Fizz"    , 4     , "Buzz", "Fizz"    ,
    7     , 8     , "Fizz"    , "Buzz", 11    , "Fizz"    ,
    13    , 14    , "FizzBuzz", 16    , 17    , "Fizz"    ,
    19    , "Buzz", "Fizz"    , 22    , 23    , "Fizz"    ,
    "Buzz", 26    , "Fizz"    , 28    , 29    , "FizzBuzz",
    31    , 32    , "Fizz"    , 34    , "Buzz", "Fizz"    ,
    37    , 38    , "Fizz"    , "Buzz", 41    , "Fizz"    ,
    43    , 44    , "FizzBuzz", 46    , 47    , "Fizz"    ,
    49    , "Buzz", "Fizz"    , 52    , 53    , "Fizz"    ,
    "Buzz", 56    , "Fizz"    , 58    , 59    , "FizzBuzz",
    61    , 62    , "Fizz"    , 64    , "Buzz", "Fizz"    ,
    67    , 68    , "Fizz"    , "Buzz", 71    , "Fizz"    ,
    73    , 74    , "FizzBuzz", 76    , 77    , "Fizz"    ,
    79    , "Buzz", "Fizz"    , 82    , 83    , "Fizz"    ,
    "Buzz", 86    , "Fizz"    , 88    , 89    , "FizzBuzz",
    91    , 92    , "Fizz"    , 94    , "Buzz", "Fizz"    ,
    97    , 98    , "Fizz"    , "Buzz",
  ]]
];

fizzbuzz.forEach( func =>
  tests.forEach( ([ input, expected ]) =>
    assert.deepEqual( func( ...input ), expected )
));
